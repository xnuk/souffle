(()=>{var J=Object.assign;var a,Ye,H,re,ie,se,W={},z=[],je=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function T(e,t){for(var o in t)e[o]=t[o];return e}function ce(e){var t=e.parentNode;t&&t.removeChild(e)}function l(e,t,o){var n,s,r,u=arguments,_={};for(r in t)r=="key"?n=t[r]:r=="ref"?s=t[r]:_[r]=t[r];if(arguments.length>3)for(o=[o],r=3;r<arguments.length;r++)o.push(u[r]);if(o!=null&&(_.children=o),typeof e=="function"&&e.defaultProps!=null)for(r in e.defaultProps)_[r]===void 0&&(_[r]=e.defaultProps[r]);return U(e,_,n,s,null)}function U(e,t,o,n,s){var r={type:e,props:t,key:o,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:s==null?++a.__v:s};return a.vnode!=null&&a.vnode(r),r}function h(e){return e.children}function D(e,t){this.props=e,this.context=t}function M(e,t){if(t==null)return e.__?M(e.__,e.__.__k.indexOf(e)+1):null;for(var o;t<e.__k.length;t++)if((o=e.__k[t])!=null&&o.__e!=null)return o.__e;return typeof e.type=="function"?M(e):null}function _e(e){var t,o;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((o=e.__k[t])!=null&&o.__e!=null){e.__e=e.__c.base=o.__e;break}return _e(e)}}function Q(e){(!e.__d&&(e.__d=!0)&&H.push(e)&&!O.__r++||ie!==a.debounceRendering)&&((ie=a.debounceRendering)||re)(O)}function O(){for(var e;O.__r=H.length;)e=H.sort(function(t,o){return t.__v.__b-o.__v.__b}),H=[],e.some(function(t){var o,n,s,r,u,_;t.__d&&(u=(r=(o=t).__v).__e,(_=o.__P)&&(n=[],(s=T({},r)).__v=r.__v+1,Z(_,r,s,o.__n,_.ownerSVGElement!==void 0,r.__h!=null?[u]:null,n,u==null?M(r):u,r.__h),le(n,r),r.__e!=u&&_e(r)))})}function me(e,t,o,n,s,r,u,_,p,m){var i,y,f,c,v,d,g,C=n&&n.__k||z,x=C.length;for(o.__k=[],i=0;i<t.length;i++)if((c=o.__k[i]=(c=t[i])==null||typeof c=="boolean"?null:typeof c=="string"||typeof c=="number"||typeof c=="bigint"?U(null,c,null,null,c):Array.isArray(c)?U(h,{children:c},null,null,null):c.__b>0?U(c.type,c.props,c.key,null,c.__v):c)!=null){if(c.__=o,c.__b=o.__b+1,(f=C[i])===null||f&&c.key==f.key&&c.type===f.type)C[i]=void 0;else for(y=0;y<x;y++){if((f=C[y])&&c.key==f.key&&c.type===f.type){C[y]=void 0;break}f=null}Z(e,c,f=f||W,s,r,u,_,p,m),v=c.__e,(y=c.ref)&&f.ref!=y&&(g||(g=[]),f.ref&&g.push(f.ref,null,c),g.push(y,c.__c||v,c)),v!=null?(d==null&&(d=v),typeof c.type=="function"&&c.__k!=null&&c.__k===f.__k?c.__d=p=ue(c,p,e):p=ae(e,c,f,C,v,p),m||o.type!=="option"?typeof o.type=="function"&&(o.__d=p):e.value=""):p&&f.__e==p&&p.parentNode!=e&&(p=M(f))}for(o.__e=d,i=x;i--;)C[i]!=null&&(typeof o.type=="function"&&C[i].__e!=null&&C[i].__e==o.__d&&(o.__d=M(n,i+1)),fe(C[i],C[i]));if(g)for(i=0;i<g.length;i++)pe(g[i],g[++i],g[++i])}function ue(e,t,o){var n,s;for(n=0;n<e.__k.length;n++)(s=e.__k[n])&&(s.__=e,t=typeof s.type=="function"?ue(s,t,o):ae(o,s,s,e.__k,s.__e,t));return t}function ae(e,t,o,n,s,r){var u,_,p;if(t.__d!==void 0)u=t.__d,t.__d=void 0;else if(o==null||s!=r||s.parentNode==null)e:if(r==null||r.parentNode!==e)e.appendChild(s),u=null;else{for(_=r,p=0;(_=_.nextSibling)&&p<n.length;p+=2)if(_==s)break e;e.insertBefore(s,r),u=r}return u!==void 0?u:s.nextSibling}function et(e,t,o,n,s){var r;for(r in o)r==="children"||r==="key"||r in t||R(e,r,null,o[r],n);for(r in t)s&&typeof t[r]!="function"||r==="children"||r==="key"||r==="value"||r==="checked"||o[r]===t[r]||R(e,r,t[r],o[r],n)}function de(e,t,o){t[0]==="-"?e.setProperty(t,o):e[t]=o==null?"":typeof o!="number"||je.test(t)?o:o+"px"}function R(e,t,o,n,s){var r;e:if(t==="style")if(typeof o=="string")e.style.cssText=o;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)o&&t in o||de(e.style,t,"");if(o)for(t in o)n&&o[t]===n[t]||de(e.style,t,o[t])}else if(t[0]==="o"&&t[1]==="n")r=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=o,o?n||e.addEventListener(t,r?ge:he,r):e.removeEventListener(t,r?ge:he,r);else if(t!=="dangerouslySetInnerHTML"){if(s)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in e)try{e[t]=o==null?"":o;break e}catch(u){}typeof o=="function"||(o!=null&&(o!==!1||t[0]==="a"&&t[1]==="r")?e.setAttribute(t,o):e.removeAttribute(t))}}function he(e){this.l[e.type+!1](a.event?a.event(e):e)}function ge(e){this.l[e.type+!0](a.event?a.event(e):e)}function Z(e,t,o,n,s,r,u,_,p){var m,i,y,f,c,v,d,g,C,x,E,P=t.type;if(t.constructor!==void 0)return null;o.__h!=null&&(p=o.__h,_=t.__e=o.__e,t.__h=null,r=[_]),(m=a.__b)&&m(t);try{e:if(typeof P=="function"){if(g=t.props,C=(m=P.contextType)&&n[m.__c],x=m?C?C.props.value:m.__:n,o.__c?d=(i=t.__c=o.__c).__=i.__E:("prototype"in P&&P.prototype.render?t.__c=i=new P(g,x):(t.__c=i=new D(g,x),i.constructor=P,i.render=ot),C&&C.sub(i),i.props=g,i.state||(i.state={}),i.context=x,i.__n=n,y=i.__d=!0,i.__h=[]),i.__s==null&&(i.__s=i.state),P.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=T({},i.__s)),T(i.__s,P.getDerivedStateFromProps(g,i.__s))),f=i.props,c=i.state,y)P.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(P.getDerivedStateFromProps==null&&g!==f&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(g,x),!i.__e&&i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(g,i.__s,x)===!1||t.__v===o.__v){i.props=g,i.state=i.__s,t.__v!==o.__v&&(i.__d=!1),i.__v=t,t.__e=o.__e,t.__k=o.__k,t.__k.forEach(function(A){A&&(A.__=t)}),i.__h.length&&u.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(g,i.__s,x),i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(f,c,v)})}i.context=x,i.props=g,i.state=i.__s,(m=a.__r)&&m(t),i.__d=!1,i.__v=t,i.__P=e,m=i.render(i.props,i.state,i.context),i.state=i.__s,i.getChildContext!=null&&(n=T(T({},n),i.getChildContext())),y||i.getSnapshotBeforeUpdate==null||(v=i.getSnapshotBeforeUpdate(f,c)),E=m!=null&&m.type===h&&m.key==null?m.props.children:m,me(e,Array.isArray(E)?E:[E],t,o,n,s,r,u,_,p),i.base=t.__e,t.__h=null,i.__h.length&&u.push(i),d&&(i.__E=i.__=null),i.__e=!1}else r==null&&t.__v===o.__v?(t.__k=o.__k,t.__e=o.__e):t.__e=tt(o.__e,t,o,n,s,r,u,p);(m=a.diffed)&&m(t)}catch(A){t.__v=null,(p||r!=null)&&(t.__e=_,t.__h=!!p,r[r.indexOf(_)]=null),a.__e(A,t,o)}}function le(e,t){a.__c&&a.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(n){n.call(o)})}catch(n){a.__e(n,o.__v)}})}function tt(e,t,o,n,s,r,u,_){var p,m,i,y,f=o.props,c=t.props,v=t.type,d=0;if(v==="svg"&&(s=!0),r!=null){for(;d<r.length;d++)if((p=r[d])&&(p===e||(v?p.localName==v:p.nodeType==3))){e=p,r[d]=null;break}}if(e==null){if(v===null)return document.createTextNode(c);e=s?document.createElementNS("http://www.w3.org/2000/svg",v):document.createElement(v,c.is&&c),r=null,_=!1}if(v===null)f===c||_&&e.data===c||(e.data=c);else{if(r=r&&z.slice.call(e.childNodes),m=(f=o.props||W).dangerouslySetInnerHTML,i=c.dangerouslySetInnerHTML,!_){if(r!=null)for(f={},y=0;y<e.attributes.length;y++)f[e.attributes[y].name]=e.attributes[y].value;(i||m)&&(i&&(m&&i.__html==m.__html||i.__html===e.innerHTML)||(e.innerHTML=i&&i.__html||""))}if(et(e,c,f,s,_),i)t.__k=[];else if(d=t.props.children,me(e,Array.isArray(d)?d:[d],t,o,n,s&&v!=="foreignObject",r,u,e.firstChild,_),r!=null)for(d=r.length;d--;)r[d]!=null&&ce(r[d]);_||("value"in c&&(d=c.value)!==void 0&&(d!==e.value||v==="progress"&&!d)&&R(e,"value",d,f.value,!1),"checked"in c&&(d=c.checked)!==void 0&&d!==e.checked&&R(e,"checked",d,f.checked,!1))}return e}function pe(e,t,o){try{typeof e=="function"?e(t):e.current=t}catch(n){a.__e(n,o)}}function fe(e,t,o){var n,s,r;if(a.unmount&&a.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||pe(n,null,t)),o||typeof e.type=="function"||(o=(s=e.__e)!=null),e.__e=e.__d=void 0,(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(u){a.__e(u,t)}n.base=n.__P=null}if(n=e.__k)for(r=0;r<n.length;r++)n[r]&&fe(n[r],t,o);s!=null&&ce(s)}function ot(e,t,o){return this.constructor(e,o)}function ye(e,t,o){var n,s,r;a.__&&a.__(e,t),s=(n=typeof o=="function")?null:o&&o.__k||t.__k,r=[],Z(t,e=(!n&&o||t).__k=l(h,null,[e]),s||W,W,t.ownerSVGElement!==void 0,!n&&o?[o]:s?null:t.firstChild?z.slice.call(t.childNodes):null,r,!n&&o?o:s?s.__e:t.firstChild,n),le(r,e)}function w(e,t){var o={__c:t="__cC"+se++,__:e,Consumer:function(n,s){return n.children(s)},Provider:function(n){var s,r;return this.getChildContext||(s=[],(r={})[t]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(u){this.props.value!==u.value&&s.some(Q)},this.sub=function(u){s.push(u);var _=u.componentWillUnmount;u.componentWillUnmount=function(){s.splice(s.indexOf(u),1),_&&_.call(u)}}),n.children}};return o.Provider.__=o.Consumer.contextType=o}a={__e:function(e,t){for(var o,n,s;t=t.__;)if((o=t.__c)&&!o.__)try{if((n=o.constructor)&&n.getDerivedStateFromError!=null&&(o.setState(n.getDerivedStateFromError(e)),s=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e),s=o.__d),s)return o.__E=o}catch(r){e=r}throw e},__v:0},Ye=function(e){return e!=null&&e.constructor===void 0},D.prototype.setState=function(e,t){var o;o=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=T({},this.state),typeof e=="function"&&(e=e(T({},o),this.props)),e&&T(o,e),e!=null&&this.__v&&(t&&this.__h.push(t),Q(this))},D.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Q(this))},D.prototype.render=h,H=[],re=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,O.__r=0,se=0;var I,k,ve,X=0,Y=[],Ce=a.__b,ke=a.__r,xe=a.diffed,be=a.__c,Pe=a.unmount;function j(e,t){a.__h&&a.__h(k,e,X||t),X=0;var o=k.__H||(k.__H={__:[],__h:[]});return e>=o.__.length&&o.__.push({}),o.__[e]}function S(e){return X=1,nt(Se,e)}function nt(e,t,o){var n=j(I++,2);return n.t=e,n.__c||(n.__=[o?o(t):Se(void 0,t),function(s){var r=n.t(n.__[0],s);n.__[0]!==r&&(n.__=[r,n.__[1]],n.__c.setState({}))}],n.__c=k),n.__}function b(e,t){var o=j(I++,3);!a.__s&&rt(o.__H,t)&&(o.__=e,o.__H=t,k.__H.__h.push(o))}function L(e){var t=k.context[e.__c],o=j(I++,9);return o.__c=e,t?(o.__==null&&(o.__=!0,t.sub(k)),t.props.value):e.__}function it(){Y.forEach(function(e){if(e.__P)try{e.__H.__h.forEach(B),e.__H.__h.forEach(ee),e.__H.__h=[]}catch(t){e.__H.__h=[],a.__e(t,e.__v)}}),Y=[]}a.__b=function(e){k=null,Ce&&Ce(e)},a.__r=function(e){ke&&ke(e),I=0;var t=(k=e.__c).__H;t&&(t.__h.forEach(B),t.__h.forEach(ee),t.__h=[])},a.diffed=function(e){xe&&xe(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(Y.push(t)!==1&&ve===a.requestAnimationFrame||((ve=a.requestAnimationFrame)||function(o){var n,s=function(){clearTimeout(r),Le&&cancelAnimationFrame(n),setTimeout(o)},r=setTimeout(s,100);Le&&(n=requestAnimationFrame(s))})(it)),k=void 0},a.__c=function(e,t){t.some(function(o){try{o.__h.forEach(B),o.__h=o.__h.filter(function(n){return!n.__||ee(n)})}catch(n){t.some(function(s){s.__h&&(s.__h=[])}),t=[],a.__e(n,o.__v)}}),be&&be(e,t)},a.unmount=function(e){Pe&&Pe(e);var t=e.__c;if(t&&t.__H)try{t.__H.__.forEach(B)}catch(o){a.__e(o,t.__v)}};var Le=typeof requestAnimationFrame=="function";function B(e){var t=k;typeof e.__c=="function"&&e.__c(),k=t}function ee(e){var t=k;e.__c=e.__(),k=t}function rt(e,t){return!e||e.length!==t.length||t.some(function(o,n){return o!==e[n]})}function Se(e,t){return typeof t=="function"?t(e):t}var N;(function(e){e[e.Session=0]="Session",e[e.Local=1]="Local"})(N||(N={}));var we=0,Te=1,st=(e,t)=>{let o=window[e===0?"sessionStorage":"localStorage"];return{get:()=>{let n=o.getItem(t);if(n==null)return null;try{return JSON.parse(n)}catch(s){return null}},set:n=>{o.setItem(t,JSON.stringify(n))}}},q=(e,t,o)=>{let[n,s]=S(o),[r,u]=S(null);return b(()=>{let _=st(e,t);u(_);let p=_.get();return p==null?_.set(n):s(p),()=>u(null)},[e,t]),b(()=>{r!=null&&r.set(n)},[n]),[n,s]};var G={version:1,tartoPopup:!1,debugMode:!1,hideWarrior:!1},Fe=w([G,e=>{}]),He=({children:e})=>{let[t,o]=q(Te,"config",G);return t.version!==G.version&&o(G),l(Fe.Provider,{value:[t,o],children:e})},F=e=>{let[t,o]=L(Fe);return[t[e],n=>o(J(J({},t),{[e]:n}))]};var Me=w([[],e=>{}]),Ne=({children:e})=>l(Me.Provider,{value:q(we,"item-history",[]),children:e}),V=()=>L(Me);var Ee="souffle-popup",te=w({openPopup:e=>{}}),Ae=({children:e})=>{let[t,o]=S(null);return l(te.Provider,{children:e,value:{openPopup:n=>{t!=null&&t.close();let s=window.open(n,Ee,"width=700,height=700");s==null||s.focus(),o(s)}}})},We=({href:e,class:t,children:o})=>{let{openPopup:n}=L(te);return l("a",{class:t,href:e,target:Ee,children:o,onClick:s=>{s.preventDefault(),n(e)}})},Ue=()=>L(te).openPopup;var oe=e=>"https://ff14.tar.to/item/list/?redirect=true&quick-search-option=item&limit=2&keyword="+encodeURIComponent(e),ct=({name:e})=>l(We,{class:"link-tarto",href:oe(e)},e),De=({name:e})=>{let[t,o]=V();return l("li",{class:"item"},l(ct,{name:e}),l("button",{class:"delete-item-btn",onClick:()=>{o(t.filter(n=>n!==e))}},"✘"))};var K=(e=300)=>new Promise(t=>setTimeout(t,e));var Oe=e=>Object.fromEntries(e.replace(/\+/g,"%20").split("&").map(t=>{let o=t.indexOf("=");return o<0?[decodeURIComponent(t),""]:[decodeURIComponent(t.slice(0,o)),decodeURIComponent(t.slice(o+1))]}));var _t=e=>e.onerror=()=>e.close(),lt=e=>new Promise(t=>{_t(e),e.onclose=async()=>{await K(1e3),t()}}),Re=(e,t)=>{let o,n=!1,s=()=>{n||(o=new WebSocket(e),o.onmessage=({data:r})=>{r==="."&&o.send(".");let u;try{u=JSON.parse(r)}catch(_){return}t(u)},lt(o).then(s))};return s(),()=>{n=!0,o.close()}};var ut=e=>{let o=Oe(window.location.search.replace(/^\?/,"")).HOST_PORT||"";if(!!/^wss?:\/\//.test(o))return Re(`${o.replace(/\/+$/g,"")}/BeforeLogLineRead`,e)},pt=async(e,t)=>{let o=await at(window);return window.__OverlayCallback=n=>{n!=null&&t(n)},o.callHandler(JSON.stringify({call:"subscribe",events:e}),()=>{}),()=>o.callHandler(JSON.stringify({call:"unsubscribe",events:e}),()=>{})},at=async e=>{var t;for(;!((t=e.OverlayPluginApi)==null?void 0:t.ready);)await K(300);return e.OverlayPluginApi},Ie=w(null),Be=w(null),qe=({children:e})=>{let[t,o]=S(null),[n,s]=S(null);return b(()=>{let r=ut(_=>{if(_.msgtype==="SendCharName"){let{charID:p,charName:m}=_.msg;return s({id:p.toString(16).toUpperCase(),name:m})}if(_.msgtype==="Chat")return o(_.msg.split("|"))});if(r)return r;let u=()=>{};return pt(["LogLine","ChangePrimaryPlayer"],_=>{if(_.type==="LogLine")return o(_.line);if(_.type==="ChangePrimaryPlayer")return s({id:_.charID.toString(16).toLowerCase(),name:_.charName})}).then(_=>{u=_}),()=>u()},[]),l(Be.Provider,{value:n},l(Ie.Provider,{value:t},e))},$=e=>{let t=L(Be),o=L(Ie);return o==null?null:e(o,t)};var ft=8,mt=9,dt=10,ht=11,gt=12,yt=13,vt=14,Ct=15,kt=16,xt=17,bt=18;var Pt=[bt,kt,xt,ft,mt,dt,ht,gt,yt,vt,Ct].sort((e,t)=>e-t),Ge=e=>Pt.includes(e);var Ve=(e,t)=>e.endsWith(t)?e.slice(0,-t.length):null,St=e=>{var n;let t=e[0]==="00"&&e[2]==="0039"&&e[3]===""&&e[4]||null;if(t==null)return null;let o=Ve(t," 보유 상황을 확인합니다.")||Ve(t,"의 이름을 클립보드에 복사했습니다.");return((n=o==null?void 0:o.match(/^\uE0BB([-\w\s\d':가-힣]+)\uE03C?$/))==null?void 0:n[1])||null},Ke=()=>$(St),Lt=(e,t)=>e.toLowerCase()===t.toLowerCase(),wt=(e,t)=>t&&e[0]==="03"&&Lt(e[2],t.id)&&e[3]===t.name?Ge(parseInt(e[4]||"0",16)):null,$e=(e=!0)=>{let[t,o]=S(e),n=$(wt);return b(()=>{n!=null&&t!==n&&o(n)},[n]),t},Tt=(e,t)=>t&&e.includes(t.id)?e.join(" | "):null,Je=()=>$(Tt);var ze=()=>{let[e,t]=V(),o=Ue(),n=Ke(),s=F("tartoPopup")[0];return b(()=>{if(n==null)return;let r=e.filter(u=>u!==n);r.unshift(n),t(r),s&&o(oe(n))},[n]),l("ul",{class:"item-list"},e.map(r=>l(De,{key:r,name:r})))};var Ft=(...e)=>({children:t})=>e.reduceRight((o,n)=>l(n,{children:o}),l(h,null,t)),Qe=Ft(He,qe,Ne,Ae);var ne=({name:e,children:t})=>{let[o,n]=F(e);return l("label",{class:"checkbox-item"},l("input",{type:"checkbox",checked:o,onChange:s=>n(s.currentTarget.checked)}),l("span",null,t))},Ze=()=>l("ul",{class:"setting"},l(ne,{name:"tartoPopup"},"자동으로 타르토 열기"),l(ne,{name:"hideWarrior"},"전투직 전환 시 숨기기"),l(ne,{name:"debugMode"},"디버그 모드"));var Ht=()=>{let e=$e(),t=F("hideWarrior")[0],o=F("debugMode")[0],n=Je();return b(()=>{o&&n!=null&&console.log(n)},[o,n]),l("main",null,l("details",null,l("summary",null,"설정"),l(Ze,null),l("button",{onClick:()=>window.location.reload()},"새로고침~~~~")),t&&!e?null:l(ze,null))},Xe=()=>l(Qe,null,l(Ht,null));ye(l(Xe,null),document.body);})();
